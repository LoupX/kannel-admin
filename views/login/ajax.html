<script>
    var loginApp = angular.module('loginApp', []);

    function loginController($scope, $http) {

        $scope.formData = {};

        $scope.processForm = function() {

            if ($scope.formData.username || $scope.formData.password) {

                $http({
                    method: 'POST',
                    url: '<? =URL("init", "users", "api/json/login")  ?>',
                    data: jQuery.param($scope.formData),
                    headers : { 'Content-Type': 'application/x-www-form-urlencoded' }
                })

                .success(function(data) {
                    if (data.data) {
                        window.location.replace('<? =URL("init", "default", "index") ?>');
                    }
                    else {
                        jQuery('.nousername').fadeOut();
                        jQuery('.nousername').fadeIn();
                        $scope.error = data.error.message;
                    }
                });

            }
            else {
                jQuery('.nousername').fadeOut();
                jQuery('.nousername').fadeIn();
                $scope.error = 'Debe llenar todos los campos';
            }

        };

    }
</script>
